repos:
  - repo: local
    hooks:
      - id: luacheck
        name: Run luacheck
        entry: luacheck Contents/mods/DREAM/42/media/lua/shared/examples
        language: system
        pass_filenames: false
      - id: dreambase-tests
        name: Run DREAMBase unit tests
        entry: bash -lc 'if [ -d external/DREAMBase ]; then cd external/DREAMBase; elif [ -d ../DREAMBase ]; then cd ../DREAMBase; else echo "DREAMBase not found (expected external/DREAMBase or ../DREAMBase)"; exit 1; fi; busted --helper=tests/helper.lua tests/unit'
        language: system
        pass_filenames: false
      - id: busted-tests
        name: Run busted tests
        entry: busted --helper=tests/helper.lua tests/unit
        language: system
        pass_filenames: false

